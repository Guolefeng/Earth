define(["exports","./Matrix2-ccd5b911","./when-4bbc8319","./RuntimeError-346a3079","./Transforms-d5c6ad6e","./ComponentDatatype-93750d1a"],(function(t,n,a,r,e,o){"use strict";var s=Math.cos,i=Math.sin,g=Math.sqrt,u={computePosition:function(t,n,r,e,o,u,h){var c=n.radiiSquared,C=t.nwCorner,l=t.boundingRectangle,d=C.latitude-t.granYCos*e+o*t.granXSin,S=s(d),w=i(d),M=c.z*w,m=C.longitude+e*t.granYSin+o*t.granXCos;n=S*s(m),C=S*i(m),S=c.x*n,c=c.y*C,w=g(S*n+c*C+M*w);u.x=S/w,u.y=c/w,u.z=M/w,r&&(r=t.stNwCorner,a.defined(r)?(d=r.latitude-t.stGranYCos*e+o*t.stGranXSin,m=r.longitude+e*t.stGranYSin+o*t.stGranXCos,h.x=(m-t.stWest)*t.lonScalar,h.y=(d-t.stSouth)*t.latScalar):(h.x=(m-l.west)*t.lonScalar,h.y=(d-l.south)*t.latScalar))}},h=new n.Matrix2,c=new n.Cartesian3,C=new n.Cartographic,l=new n.Cartesian3,d=new e.GeographicProjection;function S(t,a,r,e,o,s,i){var g=Math.cos(a),u=e*g,C=r*g,S=Math.sin(a),w=e*S,M=r*S;return c=d.project(t,c),c=n.Cartesian3.subtract(c,l,c),g=n.Matrix2.fromRotation(a,h),c=n.Matrix2.multiplyByVector(g,c,c),c=n.Cartesian3.add(c,l,c),r=(e=(t=d.unproject(c,t)).latitude)+--s*M,S=e-u*--i,a=e-u*i+s*M,g=Math.max(e,r,S,a),e=Math.min(e,r,S,a),S=(r=t.longitude)+s*C,a=r+i*w,s=r+i*w+s*C,{north:g,south:e,east:Math.max(r,S,a,s),west:Math.min(r,S,a,s),granYCos:u,granYSin:w,granXCos:C,granXSin:M,nwCorner:t}}u.computeOptions=function(t,a,r,e,s,i,g){var u=t.east,h=t.west,c=t.north,w=t.south,M=!1,m=!1;c===o.CesiumMath.PI_OVER_TWO&&(M=!0),w===-o.CesiumMath.PI_OVER_TWO&&(m=!0);var X,Y=c-w,p=(x=u<h?o.CesiumMath.TWO_PI-h+u:u-h)/((X=Math.ceil(x/a)+1)-1),x=Y/((R=Math.ceil(Y/a)+1)-1);Y=n.Rectangle.northwest(t,i),a=n.Rectangle.center(t,C);0===r&&0===e||(a.longitude<Y.longitude&&(a.longitude+=o.CesiumMath.TWO_PI),l=d.project(a,l));var R;m={granYCos:i=x,granYSin:0,granXCos:a=p,granXSin:0,nwCorner:Y,boundingRectangle:s=n.Rectangle.clone(t,s),width:X,height:R,northCap:M,southCap:m};return 0!==r&&(c=(Y=S(Y,r,p,x,0,X,R)).north,w=Y.south,u=Y.east,h=Y.west,m.granYCos=Y.granYCos,m.granYSin=Y.granYSin,m.granXCos=Y.granXCos,m.granXSin=Y.granXSin,s.north=c,s.south=w,s.east=u,s.west=h),0!==e&&(r-=e,R=S(g=n.Rectangle.northwest(s,g),r,p,x,0,X,R),m.stGranYCos=R.granYCos,m.stGranXCos=R.granXCos,m.stGranYSin=R.granYSin,m.stGranXSin=R.granXSin,m.stNwCorner=g,m.stWest=R.west,m.stSouth=R.south),m},t.RectangleGeometryLibrary=u}));