define(["./when-4bbc8319","./Matrix2-ccd5b911","./Transforms-d5c6ad6e","./ComponentDatatype-93750d1a","./RuntimeError-346a3079","./GeometryAttribute-c30799b8","./GeometryAttributes-7827a6c2","./IndexDatatype-b7d979a6","./WallGeometryLibrary-ee5443ac","./combine-83860057","./WebGLConstants-1c8239cc","./arrayRemoveDuplicates-18786327","./PolylinePipeline-8457214f","./EllipsoidGeodesic-19ea7553","./EllipsoidRhumbLine-aa9e6266","./IntersectionTests-4d6f5c54","./Plane-18bb00f8"],(function(e,i,t,a,n,r,o,s,l,m,d,u,p,f,c,h,g){"use strict";var y=new i.Cartesian3,_=new i.Cartesian3;function E(t){var n=(t=e.defaultValue(t,e.defaultValue.EMPTY_OBJECT)).positions,r=t.maximumHeights,o=t.minimumHeights,s=e.defaultValue(t.granularity,a.CesiumMath.RADIANS_PER_DEGREE);t=e.defaultValue(t.ellipsoid,i.Ellipsoid.WGS84);this._positions=n,this._minimumHeights=o,this._maximumHeights=r,this._granularity=s,this._ellipsoid=i.Ellipsoid.clone(t),this._workerName="createWallOutlineGeometry",n=1+n.length*i.Cartesian3.packedLength+2,e.defined(o)&&(n+=o.length),e.defined(r)&&(n+=r.length),this.packedLength=n+i.Ellipsoid.packedLength+1}E.pack=function(t,a,n){var r;n=e.defaultValue(n,0);var o=t._positions,s=o.length;for(a[n++]=s,r=0;r<s;++r,n+=i.Cartesian3.packedLength)i.Cartesian3.pack(o[r],a,n);var l=t._minimumHeights;s=e.defined(l)?l.length:0;if(a[n++]=s,e.defined(l))for(r=0;r<s;++r)a[n++]=l[r];var m=t._maximumHeights;if(s=e.defined(m)?m.length:0,a[n++]=s,e.defined(m))for(r=0;r<s;++r)a[n++]=m[r];return i.Ellipsoid.pack(t._ellipsoid,a,n),a[n+=i.Ellipsoid.packedLength]=t._granularity,a};var v=i.Ellipsoid.clone(i.Ellipsoid.UNIT_SPHERE),b={positions:void 0,minimumHeights:void 0,maximumHeights:void 0,ellipsoid:v,granularity:void 0};return E.unpack=function(t,a,n){a=e.defaultValue(a,0);for(var r,o,s=t[a++],l=new Array(s),m=0;m<s;++m,a+=i.Cartesian3.packedLength)l[m]=i.Cartesian3.unpack(t,a);if(0<(s=t[a++]))for(r=new Array(s),m=0;m<s;++m)r[m]=t[a++];if(0<(s=t[a++]))for(o=new Array(s),m=0;m<s;++m)o[m]=t[a++];var d=i.Ellipsoid.unpack(t,a,v),u=t[a+=i.Ellipsoid.packedLength];return e.defined(n)?(n._positions=l,n._minimumHeights=r,n._maximumHeights=o,n._ellipsoid=i.Ellipsoid.clone(d,n._ellipsoid),n._granularity=u,n):(b.positions=l,b.minimumHeights=r,b.maximumHeights=o,b.granularity=u,new E(b))},E.fromConstantHeights=function(i){var t=(i=e.defaultValue(i,e.defaultValue.EMPTY_OBJECT)).positions,a=i.minimumHeight,n=i.maximumHeight,r=e.defined(a),o=e.defined(n);if(r||o)for(var s=t.length,l=r?new Array(s):void 0,m=o?new Array(s):void 0,d=0;d<s;++d)r&&(l[d]=a),o&&(m[d]=n);return new E({positions:t,maximumHeights:m,minimumHeights:l,ellipsoid:i.ellipsoid})},E.createGeometry=function(n){var m=n._positions,d=n._minimumHeights,u=n._maximumHeights,p=n._granularity;n=n._ellipsoid,d=l.WallGeometryLibrary.computePositions(n,m,u,d,p,!1);if(e.defined(d)){var f=d.bottomPositions,c=d.topPositions,h=c.length,g=(p=2*h,new Float64Array(p)),E=0;for(h/=3,w=0;w<h;++w){var v=3*w,b=i.Cartesian3.fromArray(c,v,y);v=i.Cartesian3.fromArray(f,v,_);g[E++]=v.x,g[E++]=v.y,g[E++]=v.z,g[E++]=b.x,g[E++]=b.y,g[E++]=b.z}d=new o.GeometryAttributes({position:new r.GeometryAttribute({componentDatatype:a.ComponentDatatype.DOUBLE,componentsPerAttribute:3,values:g})});for(var C=p/3,H=s.IndexDatatype.createTypedArray(C,p=2*C-4+C),A=0,w=0;w<C-2;w+=2){var k=w,x=w+2,G=i.Cartesian3.fromArray(g,3*k,y),L=i.Cartesian3.fromArray(g,3*x,_);i.Cartesian3.equalsEpsilon(G,L,a.CesiumMath.EPSILON10)||(G=w+3,H[A++]=L=w+1,H[A++]=k,H[A++]=L,H[A++]=G,H[A++]=k,H[A++]=x)}return H[A++]=C-2,H[A++]=C-1,new r.Geometry({attributes:d,indices:H,primitiveType:r.PrimitiveType.LINES,boundingSphere:new t.BoundingSphere.fromVertices(g)})}},function(t,a){return(t=e.defined(a)?E.unpack(t,a):t)._ellipsoid=i.Ellipsoid.clone(t._ellipsoid),E.createGeometry(t)}}));