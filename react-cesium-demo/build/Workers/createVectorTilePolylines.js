define(["./Matrix2-ccd5b911","./combine-83860057","./AttributeCompression-1f045b73","./ComponentDatatype-93750d1a","./IndexDatatype-b7d979a6","./createTaskProcessorWorker","./RuntimeError-346a3079","./when-4bbc8319","./WebGLConstants-1c8239cc"],(function(a,e,r,n,t,i,s,o,u){"use strict";var c=32767,f=new a.Cartographic,p=new a.Cartesian3,d=new a.Rectangle,b=new a.Ellipsoid,C=new a.Cartesian3,w={min:void 0,max:void 0},l=new a.Cartesian3,h=new a.Cartesian3,y=new a.Cartesian3,k=new a.Cartesian3,m=new a.Cartesian3;return i((function(i,s){var o=new Uint16Array(i.positions),u=new Uint16Array(i.widths),v=new Uint32Array(i.counts),A=new Uint16Array(i.batchIds);!function(e){e=new Float64Array(e);var r=0;w.min=e[r++],w.max=e[r++],a.Rectangle.unpack(e,2,d),r+=a.Rectangle.packedLength,a.Ellipsoid.unpack(e,r,b),r+=a.Ellipsoid.packedLength,a.Cartesian3.unpack(e,r,C)}(i.packedBuffer);for(var g=b,x=C,D=function(e,t,i,s,o){var u=e.length/3,d=e.subarray(0,u),b=e.subarray(u,2*u),C=e.subarray(2*u,3*u);r.AttributeCompression.zigZagDeltaDecode(d,b,C);for(var w=new Float64Array(e.length),l=0;l<u;++l){var h=d[l],y=b[l],k=C[l];h=n.CesiumMath.lerp(t.west,t.east,h/c),y=n.CesiumMath.lerp(t.south,t.north,y/c),k=n.CesiumMath.lerp(i,s,k/c),k=a.Cartographic.fromRadians(h,y,k,f),k=o.cartographicToCartesian(k,p);a.Cartesian3.pack(k,w,3*l)}return w}(o,d,w.min,w.max,g),E=(g=4*(o=D.length/3)-4,new Float32Array(3*g)),I=new Float32Array(3*g),P=new Float32Array(3*g),U=new Float32Array(2*g),R=new Uint16Array(g),T=0,F=0,N=0,M=0,L=v.length,S=0;S<L;++S){for(var _,G=v[S],W=u[S],B=A[S],O=0;O<G;++O){0===O?(H=a.Cartesian3.unpack(D,3*M,l),z=a.Cartesian3.unpack(D,3*(M+1),h),_=a.Cartesian3.subtract(H,z,y),a.Cartesian3.add(H,_,_)):_=a.Cartesian3.unpack(D,3*(M+O-1),y);var z,H,Y,Z=a.Cartesian3.unpack(D,3*(M+O),k);O===G-1?(z=a.Cartesian3.unpack(D,3*(M+G-1),l),H=a.Cartesian3.unpack(D,3*(M+G-2),h),Y=a.Cartesian3.subtract(z,H,m),a.Cartesian3.add(z,Y,Y)):Y=a.Cartesian3.unpack(D,3*(M+O+1),m),a.Cartesian3.subtract(_,x,_),a.Cartesian3.subtract(Z,x,Z),a.Cartesian3.subtract(Y,x,Y);for(var j=O===G-1?2:4,q=0===O?2:0;q<j;++q){a.Cartesian3.pack(Z,E,T),a.Cartesian3.pack(_,I,T),a.Cartesian3.pack(Y,P,T),T+=3;var J=q-2<0?-1:1;U[F++]=q%2*2-1,U[F++]=J*W,R[N++]=B}}M+=G}var K=t.IndexDatatype.createTypedArray(g,6*o-6),Q=0,V=0;L=o-1;for(S=0;S<L;++S)K[V++]=Q,K[V++]=Q+2,K[V++]=Q+1,K[V++]=Q+1,K[V++]=Q+2,K[V++]=Q+3,Q+=4;return s.push(E.buffer,I.buffer,P.buffer),s.push(U.buffer,R.buffer,K.buffer),o={indexDatatype:2===K.BYTES_PER_ELEMENT?t.IndexDatatype.UNSIGNED_SHORT:t.IndexDatatype.UNSIGNED_INT,currentPositions:E.buffer,previousPositions:I.buffer,nextPositions:P.buffer,expandAndWidth:U.buffer,batchIds:R.buffer,indices:K.buffer},i.keepDecodedPositions&&(i=function(a){for(var e=a.length,r=new Uint32Array(e+1),n=0,t=0;t<e;++t)r[t]=n,n+=a[t];return r[e]=n,r}(v),s.push(D.buffer,i.buffer),o=e.combine(o,{decodedPositions:D.buffer,decodedPositionOffsets:i.buffer})),o}))}));