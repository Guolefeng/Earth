define(["./Transforms-d5c6ad6e","./Matrix2-ccd5b911","./RuntimeError-346a3079","./when-4bbc8319","./ComponentDatatype-93750d1a","./ArcType-98ec98bf","./arrayRemoveDuplicates-18786327","./EllipsoidGeodesic-19ea7553","./EllipsoidRhumbLine-aa9e6266","./EncodedCartesian3-08b8d980","./GeometryAttribute-c30799b8","./IntersectionTests-4d6f5c54","./Plane-18bb00f8","./WebMercatorProjection-b29097b4","./combine-83860057","./WebGLConstants-1c8239cc"],(function(e,a,t,n,i,r,s,o,l,u,c,C,p,d,h,g){"use strict";function m(t){t=n.defaultValue(t,n.defaultValue.EMPTY_OBJECT),this._ellipsoid=n.defaultValue(t.ellipsoid,a.Ellipsoid.WGS84),this._rectangle=n.defaultValue(t.rectangle,a.Rectangle.MAX_VALUE),this._projection=new e.GeographicProjection(this._ellipsoid),this._numberOfLevelZeroTilesX=n.defaultValue(t.numberOfLevelZeroTilesX,2),this._numberOfLevelZeroTilesY=n.defaultValue(t.numberOfLevelZeroTilesY,1)}Object.defineProperties(m.prototype,{ellipsoid:{get:function(){return this._ellipsoid}},rectangle:{get:function(){return this._rectangle}},projection:{get:function(){return this._projection}}}),m.prototype.getNumberOfXTilesAtLevel=function(e){return this._numberOfLevelZeroTilesX<<e},m.prototype.getNumberOfYTilesAtLevel=function(e){return this._numberOfLevelZeroTilesY<<e},m.prototype.rectangleToNativeRectangle=function(e,t){var r=i.CesiumMath.toDegrees(e.west),s=i.CesiumMath.toDegrees(e.south),o=i.CesiumMath.toDegrees(e.east);e=i.CesiumMath.toDegrees(e.north);return n.defined(t)?(t.west=r,t.south=s,t.east=o,t.north=e,t):new a.Rectangle(r,s,o,e)},m.prototype.tileXYToNativeRectangle=function(e,a,t,n){return(n=this.tileXYToRectangle(e,a,t,n)).west=i.CesiumMath.toDegrees(n.west),n.south=i.CesiumMath.toDegrees(n.south),n.east=i.CesiumMath.toDegrees(n.east),n.north=i.CesiumMath.toDegrees(n.north),n},m.prototype.tileXYToRectangle=function(e,t,i,r){var s=this._rectangle,o=this.getNumberOfXTilesAtLevel(i),l=this.getNumberOfYTilesAtLevel(i);o=e*(i=s.width/o)+s.west,e=(e+1)*i+s.west,i=s.height/l,l=s.north-t*i,i=s.north-(t+1)*i;return(r=n.defined(r)?r:new a.Rectangle(o,i,e,l)).west=o,r.south=i,r.east=e,r.north=l,r},m.prototype.positionToTileXY=function(e,t,r){var s=this._rectangle;if(a.Rectangle.contains(s,e)){var o=this.getNumberOfXTilesAtLevel(t),l=this.getNumberOfYTilesAtLevel(t),u=s.width/o,c=s.height/l;t=e.longitude;return s.east<s.west&&(t+=i.CesiumMath.TWO_PI),o<=(u=(t-s.west)/u|0)&&(u=o-1),l<=(c=(s.north-e.latitude)/c|0)&&(c=l-1),n.defined(r)?(r.x=u,r.y=c,r):new a.Cartesian2(u,c)}};var f=new a.Cartesian3,w=new a.Cartesian3,y=new a.Cartographic,v=new a.Cartesian3,M=new a.Cartesian3,T=new e.BoundingSphere,E=new m,_=[new a.Cartographic,new a.Cartographic,new a.Cartographic,new a.Cartographic],O=new a.Cartesian2,b={};function P(e){a.Cartographic.fromRadians(e.east,e.north,0,_[0]),a.Cartographic.fromRadians(e.west,e.north,0,_[1]),a.Cartographic.fromRadians(e.east,e.south,0,_[2]),a.Cartographic.fromRadians(e.west,e.south,0,_[3]);for(var t=0,n=0,i=0,r=0,s=b._terrainHeightsMaxLevel,o=0;o<=s;++o){for(var l=!1,u=0;u<4;++u)if(E.positionToTileXY(_[u],o,O),0===u)i=O.x,r=O.y;else if(i!==O.x||r!==O.y){l=!0;break}if(l)break;t=i,n=r}if(0!==o)return{x:t,y:n,level:s<o?s:o-1}}b.initialize=function(){var a=b._initPromise;return n.defined(a)?a:(a=e.Resource.fetchJson(e.buildModuleUrl("Assets/approximateTerrainHeights.json")).then((function(e){b._terrainHeights=e})),b._initPromise=a)},b.getMinimumMaximumHeights=function(e,t){t=n.defaultValue(t,a.Ellipsoid.WGS84);var i=P(e),r=b._defaultMinTerrainHeight,s=b._defaultMaxTerrainHeight;return n.defined(i)&&(i=i.level+"-"+i.x+"-"+i.y,i=b._terrainHeights[i],n.defined(i)&&(r=i[0],s=i[1]),t.cartographicToCartesian(a.Rectangle.northeast(e,y),f),t.cartographicToCartesian(a.Rectangle.southwest(e,y),w),a.Cartesian3.midpoint(w,f,v),t=t.scaleToGeodeticSurface(v,M),r=n.defined(t)?(t=a.Cartesian3.distance(v,t),Math.min(r,-t)):b._defaultMinTerrainHeight),{minimumTerrainHeight:r=Math.max(b._defaultMinTerrainHeight,r),maximumTerrainHeight:s}},b.getBoundingSphere=function(t,i){i=n.defaultValue(i,a.Ellipsoid.WGS84);var r=P(t),s=b._defaultMaxTerrainHeight;n.defined(r)&&(o=r.level+"-"+r.x+"-"+r.y,o=b._terrainHeights[o],n.defined(o)&&(s=o[1]));var o=e.BoundingSphere.fromRectangle3D(t,i,0);return e.BoundingSphere.fromRectangle3D(t,i,s,T),e.BoundingSphere.union(o,T,o)},b._terrainHeightsMaxLevel=6,b._defaultMaxTerrainHeight=9e3,b._defaultMinTerrainHeight=-1e5,b._terrainHeights=void 0,b._initPromise=void 0,Object.defineProperties(b,{initialized:{get:function(){return n.defined(b._terrainHeights)}}});var A=[e.GeographicProjection,d.WebMercatorProjection],k=A.length,L=Math.cos(i.CesiumMath.toRadians(30)),S=Math.cos(i.CesiumMath.toRadians(150));function x(e){var t=(e=n.defaultValue(e,n.defaultValue.EMPTY_OBJECT)).positions;this.width=n.defaultValue(e.width,1),this._positions=t,this.granularity=n.defaultValue(e.granularity,9999),this.loop=n.defaultValue(e.loop,!1),this.arcType=n.defaultValue(e.arcType,r.ArcType.GEODESIC),this._ellipsoid=a.Ellipsoid.WGS84,this._projectionIndex=0,this._workerName="createGroundPolylineGeometry",this._scene3DOnly=!1}Object.defineProperties(x.prototype,{packedLength:{get:function(){return 1+3*this._positions.length+1+1+1+a.Ellipsoid.packedLength+1+1}}}),x.setProjectionAndEllipsoid=function(e,a){for(var t=0,n=0;n<k;n++)if(a instanceof A[n]){t=n;break}e._projectionIndex=t,e._ellipsoid=a.ellipsoid};var I=new a.Cartesian3,N=new a.Cartesian3,R=new a.Cartesian3;function D(e,t,n,i,r){var s=Y(i,e,0,I);n=Y(i,e,n,N),t=Y(i,t,0,R),n=F(n,s,N),s=F(t,s,R);return a.Cartesian3.cross(s,n,r),a.Cartesian3.normalize(r,r)}var z=new a.Cartographic,H=new a.Cartesian3,B=new a.Cartesian3,j=new a.Cartesian3;function G(e,t,n,i,s,u,c,C,p,d,h){var g;if(0!==s&&(u===r.ArcType.GEODESIC?g=new o.EllipsoidGeodesic(e,t,c):u===r.ArcType.RHUMB&&(g=new l.EllipsoidRhumbLine(e,t,c)),!((u=g.surfaceDistance)<s)))for(var m=D(e,t,i,c,j),f=u/(s=Math.ceil(u/s)),w=f,y=s-1,v=C.length,M=0;M<y;M++){var T=g.interpolateUsingSurfaceDistance(w,z),E=Y(c,T,n,H),_=Y(c,T,i,B);a.Cartesian3.pack(m,C,v),a.Cartesian3.pack(E,p,v),a.Cartesian3.pack(_,d,v),h.push(T.latitude),h.push(T.longitude),v+=3,w+=f}}var V=new a.Cartographic;function Y(e,t,n,i){return a.Cartographic.clone(t,V),V.height=n,a.Cartographic.toCartesian(V,e,i)}function F(e,t,n){return a.Cartesian3.subtract(e,t,n),a.Cartesian3.normalize(n,n),n}function q(e,t,n,i){return i=F(e,t,i),i=a.Cartesian3.cross(i,n,i),i=a.Cartesian3.normalize(i,i),a.Cartesian3.cross(n,i,i)}x.pack=function(e,t,i){var r=n.defaultValue(i,0),s=e._positions,o=s.length;t[r++]=o;for(var l=0;l<o;++l){var u=s[l];a.Cartesian3.pack(u,t,r),r+=3}return t[r++]=e.granularity,t[r++]=e.loop?1:0,t[r++]=e.arcType,a.Ellipsoid.pack(e._ellipsoid,t,r),r+=a.Ellipsoid.packedLength,t[r++]=e._projectionIndex,t[r++]=e._scene3DOnly?1:0,t},x.unpack=function(e,t,i){for(var r=n.defaultValue(t,0),s=e[r++],o=new Array(s),l=0;l<s;l++)o[l]=a.Cartesian3.unpack(e,r),r+=3;var u=e[r++],c=1===e[r++],C=e[r++],p=a.Ellipsoid.unpack(e,r);r+=a.Ellipsoid.packedLength;var d=e[r++];t=1===e[r++];return(i=n.defined(i)?i:new x({positions:o}))._positions=o,i.granularity=u,i.loop=c,i.arcType=C,i._ellipsoid=p,i._projectionIndex=d,i._scene3DOnly=t,i};var X=new a.Cartesian3,W=new a.Cartesian3,U=new a.Cartesian3,Z=new a.Cartesian3;function J(e,t,n,r,s){return e=q(e,t,n=F(n,t,Z),X),t=q(r,t,n,W),i.CesiumMath.equalsEpsilon(a.Cartesian3.dot(e,t),-1,i.CesiumMath.EPSILON5)?(s=a.Cartesian3.cross(n,e,s),a.Cartesian3.normalize(s,s)):(s=a.Cartesian3.add(t,e,s),s=a.Cartesian3.normalize(s,s),n=a.Cartesian3.cross(n,s,U),a.Cartesian3.dot(t,n)<0?a.Cartesian3.negate(s,s):s)}var Q=p.Plane.fromPointNormal(a.Cartesian3.ZERO,a.Cartesian3.UNIT_Y),K=new a.Cartesian3,$=new a.Cartesian3,ee=new a.Cartesian3,ae=new a.Cartesian3,te=new a.Cartesian3,ne=new a.Cartesian3,ie=new a.Cartographic,re=new a.Cartographic,se=new a.Cartographic;x.createGeometry=function(t){var o,p,d,h,g,m=!t._scene3DOnly,f=t.loop,w=t._ellipsoid,y=t.granularity,v=t.arcType,M=new A[t._projectionIndex](w),T=1e3,E=t._positions,_=E.length;2===_&&(f=!1);for(var O,P,k,S=new l.EllipsoidRhumbLine(void 0,void 0,w),x=[E[0]],I=0;I<_-1;I++)p=E[I],d=E[I+1],O=C.IntersectionTests.lineSegmentPlane(p,d,Q,ne),!n.defined(O)||a.Cartesian3.equalsEpsilon(O,p,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(O,d,i.CesiumMath.EPSILON7)||(t.arcType===r.ArcType.GEODESIC?x.push(a.Cartesian3.clone(O)):t.arcType===r.ArcType.RHUMB&&(k=w.cartesianToCartographic(O,ie).longitude,h=w.cartesianToCartographic(p,ie),g=w.cartesianToCartographic(d,re),S.setEndPoints(h,g),P=S.findIntersectionWithLongitude(k,se),O=w.cartographicToCartesian(P,ne),!n.defined(O)||a.Cartesian3.equalsEpsilon(O,p,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(O,d,i.CesiumMath.EPSILON7)||x.push(a.Cartesian3.clone(O)))),x.push(d);f&&(p=E[_-1],d=E[0],O=C.IntersectionTests.lineSegmentPlane(p,d,Q,ne),!n.defined(O)||a.Cartesian3.equalsEpsilon(O,p,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(O,d,i.CesiumMath.EPSILON7)||(t.arcType===r.ArcType.GEODESIC?x.push(a.Cartesian3.clone(O)):t.arcType===r.ArcType.RHUMB&&(k=w.cartesianToCartographic(O,ie).longitude,h=w.cartesianToCartographic(p,ie),g=w.cartesianToCartographic(d,re),S.setEndPoints(h,g),P=S.findIntersectionWithLongitude(k,se),O=w.cartographicToCartesian(P,ne),!n.defined(O)||a.Cartesian3.equalsEpsilon(O,p,i.CesiumMath.EPSILON7)||a.Cartesian3.equalsEpsilon(O,d,i.CesiumMath.EPSILON7)||x.push(a.Cartesian3.clone(O)))));var N=x.length,R=new Array(N);for(I=0;I<N;I++){var z=a.Cartographic.fromCartesian(x[I],w);z.height=0,R[I]=z}if(!((N=(R=s.arrayRemoveDuplicates(R,a.Cartographic.equalsEpsilon)).length)<2)){var H=[],B=[],j=[],V=[],q=K,X=$,W=ee,U=ae,Z=te,oe=R[0],le=R[1];for(q=Y(w,R[N-1],0,q),U=Y(w,le,0,U),X=Y(w,oe,0,X),W=Y(w,oe,T,W),Z=f?J(q,X,W,U,Z):D(oe,le,T,w,Z),a.Cartesian3.pack(Z,B,0),a.Cartesian3.pack(X,j,0),a.Cartesian3.pack(W,V,0),H.push(oe.latitude),H.push(oe.longitude),G(oe,le,0,T,y,v,w,B,j,V,H),I=1;I<N-1;++I){q=a.Cartesian3.clone(X,q),X=a.Cartesian3.clone(U,X);var ue=R[I];Y(w,ue,T,W),Y(w,R[I+1],0,U),J(q,X,W,U,Z),o=B.length,a.Cartesian3.pack(Z,B,o),a.Cartesian3.pack(X,j,o),a.Cartesian3.pack(W,V,o),H.push(ue.latitude),H.push(ue.longitude),G(R[I],R[I+1],0,T,y,v,w,B,j,V,H)}var Ce=R[N-1],pe=R[N-2];if(X=Y(w,Ce,0,X),W=Y(w,Ce,T,W),Z=f?(le=R[0],J(q=Y(w,pe,0,q),X,W,U=Y(w,le,0,U),Z)):D(pe,Ce,T,w,Z),o=B.length,a.Cartesian3.pack(Z,B,o),a.Cartesian3.pack(X,j,o),a.Cartesian3.pack(W,V,o),H.push(Ce.latitude),H.push(Ce.longitude),f){for(G(Ce,oe,0,T,y,v,w,B,j,V,H),o=B.length,I=0;I<3;++I)B[o+I]=B[I],j[o+I]=j[I],V[o+I]=V[I];H.push(oe.latitude),H.push(oe.longitude)}return function(t,n,r,s,o,l,C){var p,d,h,g,m,f,w=n._ellipsoid,y=r.length/3-1,v=8*y,M=4*v,T=new(65535<v?Uint32Array:Uint16Array)(36*y),E=new Float64Array(3*v),_=new Float32Array(M),O=new Float32Array(M),P=new Float32Array(M),A=new Float32Array(M),k=new Float32Array(M);C&&(h=new Float32Array(M),g=new Float32Array(M),m=new Float32Array(M),f=new Float32Array(2*v));var S=l.length/2,x=0,I=ve;I.height=0;var N=Me;N.height=0;var R=Te,D=Ee;if(C)for(d=0,p=1;p<S;p++)I.latitude=l[d],I.longitude=l[d+1],N.latitude=l[d+2],N.longitude=l[d+3],R=n.project(I,R),D=n.project(N,D),x+=a.Cartesian3.distance(R,D),d+=2;var z=s.length/3;D=a.Cartesian3.unpack(s,0,D);var H,B=0;for(d=3,p=1;p<z;p++)R=a.Cartesian3.clone(D,R),D=a.Cartesian3.unpack(s,d,D),B+=a.Cartesian3.distance(R,D),d+=3;d=3;var j=0,G=0,V=0,Y=0,q=!1,X=a.Cartesian3.unpack(r,0,Oe),W=a.Cartesian3.unpack(s,0,Ee),U=a.Cartesian3.unpack(o,0,Pe);t&&(ce(U,ha=a.Cartesian3.unpack(r,r.length-6,_e),X,W)&&(U=a.Cartesian3.negate(U,U)));var Z,J,Q,K,$,ee,ae,te=0,ne=0,ie=0;for(p=0;p<y;p++){var re=a.Cartesian3.clone(X,_e),se=a.Cartesian3.clone(W,Te),oe=a.Cartesian3.clone(U,be);q&&(oe=a.Cartesian3.negate(oe,oe)),X=a.Cartesian3.unpack(r,d,Oe),W=a.Cartesian3.unpack(s,d,Ee),q=ce(U=a.Cartesian3.unpack(o,d,Pe),re,X,W),I.latitude=l[j],I.longitude=l[j+1],N.latitude=l[j+2],N.longitude=l[j+3],C&&(pa=function(e,a){var t=Math.abs(e.longitude),n=Math.abs(a.longitude);if(i.CesiumMath.equalsEpsilon(t,i.CesiumMath.PI,i.CesiumMath.EPSILON11)){var r=i.CesiumMath.sign(a.longitude);return e.longitude=r*(t-i.CesiumMath.EPSILON11),1}return i.CesiumMath.equalsEpsilon(n,i.CesiumMath.PI,i.CesiumMath.EPSILON11)?(e=i.CesiumMath.sign(e.longitude),a.longitude=e*(n-i.CesiumMath.EPSILON11),2):0}(I,N),Z=n.project(I,Ne),(ta=F(J=n.project(N,Re),Z,Xe)).y=Math.abs(ta.y),Q=De,K=ze,0===pa||a.Cartesian3.dot(ta,a.Cartesian3.UNIT_Y)>L?(Q=he(n,I,oe,Z,De),K=he(n,N,U,J,ze)):1===pa?(K=he(n,N,U,J,ze),Q.x=0,Q.y=i.CesiumMath.sign(I.longitude-Math.abs(N.longitude)),Q.z=0):(Q=he(n,I,oe,Z,De),K.x=0,K.y=i.CesiumMath.sign(I.longitude-N.longitude),K.z=0));var le=a.Cartesian3.distance(se,W),ue=u.EncodedCartesian3.fromCartesian(re,Fe),Ce=a.Cartesian3.subtract(X,re,He),pe=a.Cartesian3.normalize(Ce,Ge),de=a.Cartesian3.subtract(se,re,Be);de=a.Cartesian3.normalize(de,de);var ge=a.Cartesian3.cross(pe,de,Ge);ge=a.Cartesian3.normalize(ge,ge);var me=a.Cartesian3.cross(de,oe,Ve);me=a.Cartesian3.normalize(me,me);var we=a.Cartesian3.subtract(W,X,je);we=a.Cartesian3.normalize(we,we);var $e=a.Cartesian3.cross(U,we,Ye);$e=a.Cartesian3.normalize($e,$e);var ea=le/B,aa=te/B,ta=0,na=0,ia=0;for(C&&(ta=a.Cartesian3.distance(Z,J),$=u.EncodedCartesian3.fromCartesian(Z,qe),ee=a.Cartesian3.subtract(J,Z,Xe),Ca=(ae=a.Cartesian3.normalize(ee,We)).x,ae.x=ae.y,ae.y=-Ca,na=ta/x,ia=ne/x),H=0;H<8;H++){var ra=Y+4*H,sa=G+2*H,oa=ra+3,la=H<4?1:-1,ua=2===H||3===H||6===H||7===H?1:-1;a.Cartesian3.pack(ue.high,_,ra),_[oa]=Ce.x,a.Cartesian3.pack(ue.low,O,ra),O[oa]=Ce.y,a.Cartesian3.pack(me,P,ra),P[oa]=Ce.z,a.Cartesian3.pack($e,A,ra),A[oa]=ea*la,a.Cartesian3.pack(ge,k,ra);var ca=aa*ua;0===ca&&ua<0&&(ca=9),k[oa]=ca,C&&(h[ra]=$.high.x,h[ra+1]=$.high.y,h[ra+2]=$.low.x,h[ra+3]=$.low.y,m[ra]=-Q.y,m[ra+1]=Q.x,m[ra+2]=K.y,m[ra+3]=-K.x,g[ra]=ee.x,g[ra+1]=ee.y,g[ra+2]=ae.x,g[ra+3]=ae.y,f[sa]=na*la,0===(ca=ia*ua)&&ua<0&&(ca=9),f[sa+1]=ca)}var Ca,pa=xe;pe=Ie,de=Le,oe=Se,we=a.Rectangle.fromCartographicArray(Ae,ke);ie+=we=(Ca=b.getMinimumMaximumHeights(we,w)).minimumTerrainHeight,ie+=Ca=Ca.maximumTerrainHeight,fe(re,se,we,Ca,pa,de),fe(X,W,we,Ca,pe,oe),Ca=a.Cartesian3.multiplyByScalar(ge,i.CesiumMath.EPSILON5,Ue),a.Cartesian3.add(pa,Ca,pa),a.Cartesian3.add(pe,Ca,pe),a.Cartesian3.add(de,Ca,de),a.Cartesian3.add(oe,Ca,oe),ye(pa,pe),ye(de,oe),a.Cartesian3.pack(pa,E,V),a.Cartesian3.pack(pe,E,V+3),a.Cartesian3.pack(oe,E,V+6),a.Cartesian3.pack(de,E,V+9),Ca=a.Cartesian3.multiplyByScalar(ge,-2*i.CesiumMath.EPSILON5,Ue),a.Cartesian3.add(pa,Ca,pa),a.Cartesian3.add(pe,Ca,pe),a.Cartesian3.add(de,Ca,de),a.Cartesian3.add(oe,Ca,oe),ye(pa,pe),ye(de,oe),a.Cartesian3.pack(pa,E,V+12),a.Cartesian3.pack(pe,E,V+15),a.Cartesian3.pack(oe,E,V+18),a.Cartesian3.pack(de,E,V+21),j+=2,d+=3,G+=16,V+=24,Y+=32,te+=le,ne+=ta}var da=d=0;for(p=0;p<y;p++){for(H=0;H<Qe;H++)T[d+H]=Je[H]+da;da+=8,d+=Qe}t=Ze,e.BoundingSphere.fromVertices(r,a.Cartesian3.ZERO,3,t[0]),e.BoundingSphere.fromVertices(s,a.Cartesian3.ZERO,3,t[1]);var ha=e.BoundingSphere.fromBoundingSpheres(t);return ha.radius+=ie/(2*y),t={position:new c.GeometryAttribute({componentDatatype:i.ComponentDatatype.DOUBLE,componentsPerAttribute:3,normalize:!1,values:E}),startHiAndForwardOffsetX:Ke(_),startLoAndForwardOffsetY:Ke(O),startNormalAndForwardOffsetZ:Ke(P),endNormalAndTextureCoordinateNormalizationX:Ke(A),rightNormalAndTextureCoordinateNormalizationY:Ke(k)},C&&(t.startHiLo2D=Ke(h),t.offsetAndRight2D=Ke(g),t.startEndNormals2D=Ke(m),t.texcoordNormalization2D=new c.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:2,normalize:!1,values:f})),new c.Geometry({attributes:t,indices:T,boundingSphere:ha})}(f,M,j,V,B,H,m)}};var oe=new a.Cartesian3,le=new a.Matrix3,ue=new e.Quaternion;function ce(t,n,r,s){return n=F(r,n,oe),n=a.Cartesian3.dot(n,t),(L<n||n<S)&&(r=F(s,r,Z),n=n<S?i.CesiumMath.PI_OVER_TWO:-i.CesiumMath.PI_OVER_TWO,n=e.Quaternion.fromAxisAngle(r,n,ue),n=a.Matrix3.fromQuaternion(n,le),a.Matrix3.multiplyByVector(n,t,t),!0)}var Ce=new a.Cartographic,pe=new a.Cartesian3,de=new a.Cartesian3;function he(e,t,n,r,s){var o=a.Cartographic.toCartesian(t,e._ellipsoid,pe),l=a.Cartesian3.add(o,n,de),u=!1,c=e._ellipsoid,C=c.cartesianToCartographic(l,Ce);return Math.abs(t.longitude-C.longitude)>i.CesiumMath.PI_OVER_TWO&&(u=!0,l=a.Cartesian3.subtract(o,n,de),C=c.cartesianToCartographic(l,Ce)),C.height=0,C=e.project(C,s),(s=a.Cartesian3.subtract(C,r,s)).z=0,s=a.Cartesian3.normalize(s,s),u&&a.Cartesian3.negate(s,s),s}var ge=new a.Cartesian3,me=new a.Cartesian3;function fe(e,t,n,i,r,s){var o=a.Cartesian3.subtract(t,e,ge);a.Cartesian3.normalize(o,o),n=a.Cartesian3.multiplyByScalar(o,n-0,me),a.Cartesian3.add(e,n,r),n=a.Cartesian3.multiplyByScalar(o,i-1e3,me),a.Cartesian3.add(t,n,s)}var we=new a.Cartesian3;function ye(e,t){var n=p.Plane.getPointDistance(Q,e),r=p.Plane.getPointDistance(Q,t),s=we;i.CesiumMath.equalsEpsilon(n,0,i.CesiumMath.EPSILON2)?(s=F(t,e,s),a.Cartesian3.multiplyByScalar(s,i.CesiumMath.EPSILON2,s),a.Cartesian3.add(e,s,e)):i.CesiumMath.equalsEpsilon(r,0,i.CesiumMath.EPSILON2)&&(s=F(e,t,s),a.Cartesian3.multiplyByScalar(s,i.CesiumMath.EPSILON2,s),a.Cartesian3.add(t,s,t))}var ve=new a.Cartographic,Me=new a.Cartographic,Te=new a.Cartesian3,Ee=new a.Cartesian3,_e=new a.Cartesian3,Oe=new a.Cartesian3,be=new a.Cartesian3,Pe=new a.Cartesian3,Ae=[ve,Me],ke=new a.Rectangle,Le=new a.Cartesian3,Se=new a.Cartesian3,xe=new a.Cartesian3,Ie=new a.Cartesian3,Ne=new a.Cartesian3,Re=new a.Cartesian3,De=new a.Cartesian3,ze=new a.Cartesian3,He=new a.Cartesian3,Be=new a.Cartesian3,je=new a.Cartesian3,Ge=new a.Cartesian3,Ve=new a.Cartesian3,Ye=new a.Cartesian3,Fe=new u.EncodedCartesian3,qe=new u.EncodedCartesian3,Xe=new a.Cartesian3,We=new a.Cartesian3,Ue=new a.Cartesian3,Ze=[new e.BoundingSphere,new e.BoundingSphere],Je=[0,2,1,0,3,2,0,7,3,0,4,7,0,5,4,0,1,5,5,7,4,5,6,7,5,2,6,5,1,2,3,6,2,3,7,6],Qe=Je.length;function Ke(e){return new c.GeometryAttribute({componentDatatype:i.ComponentDatatype.FLOAT,componentsPerAttribute:4,normalize:!1,values:e})}return x._projectNormal=he,function(e,a){return b.initialize().then((function(){return n.defined(a)&&(e=x.unpack(e,a)),x.createGeometry(e)}))}}));